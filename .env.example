# ============================================
# CWG Recipes - Environment Configuration
# ============================================
# Copy this file to .env and update with your actual values
# NEVER commit the .env file to git!
#
# For local development: Use localhost URLs and simple passwords
# For production (NAS): Use strong passwords and proper URLs
# ============================================

# --------------------------------------------
# Database Configuration
# --------------------------------------------
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
#
# Local development (npm run dev):
# DATABASE_URL=postgresql://recipes_user:devpassword123@localhost:5432/recipes_db
#
# Docker deployment (docker-compose):
DATABASE_URL=postgresql://recipes_user:devpassword123@postgres:5432/recipes_db
# Note: Use 'postgres' as host for Docker, 'localhost' for local dev

# --------------------------------------------
# PostgreSQL Settings (for docker-compose)
# --------------------------------------------
POSTGRES_USER=recipes_user
POSTGRES_PASSWORD=your_strong_password_here
POSTGRES_DB=recipes_db
#
# ⚠️  IMPORTANT: Change POSTGRES_PASSWORD to a strong password!
#     Use at least 16 characters with letters, numbers, and symbols

# --------------------------------------------
# Backend API Configuration
# --------------------------------------------
PORT=3000
NODE_ENV=development
# Set to 'production' when deploying to NAS

# --------------------------------------------
# JWT Authentication
# --------------------------------------------
# ⚠️  CRITICAL: Generate a secure random secret for production!
#
# Generate secure secret with:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#   OR
#   openssl rand -hex 32
#
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars
JWT_EXPIRES_IN=7d
# Token expiration: 7d = 7 days, 24h = 24 hours, etc.

# --------------------------------------------
# CORS Configuration
# --------------------------------------------
# URL where frontend will be accessed from
#
# Local development (npm run dev):
# FRONTEND_URL=http://localhost:5173
#
# Docker deployment (docker-compose):
FRONTEND_URL=http://localhost
# Note: In Docker, nginx serves on port 50000 externally but containers use port 80 internally

# --------------------------------------------
# Frontend API URL
# --------------------------------------------
# Used by Vite during build to know where the API is
#
# Local development (npm run dev):
# VITE_API_URL=http://localhost:3000/api
#
# Docker deployment (nginx proxies /api to backend):
VITE_API_URL=/api

# --------------------------------------------
# Gemini AI Configuration (Recipe Import)
# --------------------------------------------
# Optional: Required only if you want AI-powered recipe import from URLs/videos
# Get free API key at: https://ai.google.dev/
#
# Free tier limits:
#   - 15 requests per minute
#   - 1,500 requests per day
#   - Plenty for family use!
#
# Leave empty to disable AI import (structured data extraction still works)
GEMINI_API_KEY=
# Example: GEMINI_API_KEY=AIzaSyAbc123...
#
# Model to use (default: gemini-3-flash-preview, free tier as of 2026)
# See available models: https://ai.google.dev/gemini-api/docs/models
GEMINI_MODEL=gemini-3-flash-preview

# ============================================
# Quick Setup Guide
# ============================================
#
# 1. DOCKER DEPLOYMENT (Recommended):
#    cp .env.example .env
#    # The default values above are configured for Docker
#    # Then update for production:
#    - Set NODE_ENV=production
#    - Generate secure JWT_SECRET (see command above)
#    - Use strong POSTGRES_PASSWORD (16+ chars)
#
#    Access URLs (with docker-compose):
#    - Frontend: http://localhost:50000 (or http://NAS_IP:50000)
#    - Backend API: http://localhost:50001/api
#    - PostgreSQL: localhost:50002
#
# 2. LOCAL DEVELOPMENT (npm run dev):
#    Create frontend/.env and backend/.env separately
#    Use localhost URLs and port 3000, 5432
#
# 3. Verify security:
#    - .env is in .gitignore ✓
#    - Used strong passwords ✓
#    - JWT_SECRET is random 32+ chars ✓
#
# ============================================
#
# PORT CONFIGURATION:
# External (host access):  50000 (frontend), 50001 (backend), 50002 (postgres)
# Internal (Docker network): 80 (nginx), 3000 (backend), 5432 (postgres)
#
# ============================================
